<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <title>ChuHo|Republic Of China</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/zhuhestyle.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/zhuhelight.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">ChuHo</h1>
      <h2 class="project-tagline">chuho|Republic Of China</h2>
      <a href="/t" class="btn">輕聽</a>
      <a href="/z" class="btn">肇基</a>
    </section>
    <section class="main-content">
    <script type="text/javascript">
        function init() {        // Master function, encapsulates all functions
            var video = document.getElementById("Video1");                                               
            if (video.canPlayType) {   // tests that we have HTML5 video support
                // if successful, display buttons and set up events
                document.getElementById("buttonbar").style.display = "block";                
                document.getElementById("inputField").style.display = "block";

                // helper functions
                //  play video
                function vidplay(evt) {
                    if (video.src == "") {  // inital source load
                        getVideo();
                    }
                    button = evt.target; //  get the button id to swap the text based on the state                                    
                    if (video.paused) {   // play the file, and display pause symbol
                        video.play();
                        button.textContent = "||";
                    } else {              // pause the file, and display play symbol  
                        video.pause();
                        button.textContent = ">";
                    }
                }
                //  load video file from input field
                function getVideo() {
                    var fileURL = document.getElementById("videoFile").value;  // get input field                    
                    if (fileURL != "") {
                        video.src = fileURL;
                        video.load();  // if HTML source element is used
                        document.getElementById("play").click();  // start play
                    } else {
                        errMessage("Enter a valid video URL");  // fail silently
                    }
                }



                //  button helper functions 
                //  skip forward, backward, or restart
                function setTime(tValue) {
                //  if no video is loaded, this throws an exception 
                    try {
                        if (tValue == 0) {
                            video.currentTime = tValue;
                        }
                        else {
                            video.currentTime += tValue;
                        }
                        
                     } catch (err) {
                         // errMessage(err) // show exception
                     errMessage("Video content might not be loaded");
                       }
             }
                //  display an error message 
                function errMessage(msg) {
                // displays an error message for 5 seconds then clears it
                    document.getElementById("errorMsg").textContent = msg;
                    setTimeout("document.getElementById('errorMsg').textContent=''", 5000);
                }
                // change volume based on incoming value 
                function setVol(value) {
                    var vol = video.volume;
                    vol += value;
                    //  test for range 0 - 1 to avoid exceptions
                    if (vol >= 0 && vol <= 1) {
                        // if valid value, use it
                        video.volume = vol;
                    } else {
                        // otherwise substitute a 0 or 1
                        video.volume = (vol < 0) ? 0 : 1;                        
                    }
                }
                //  button events               
                //  Play
                document.getElementById("play").addEventListener("click", vidplay, false);
                //  Restart
                document.getElementById("restart").addEventListener("click", function () {
                    setTime(0);
                }, false);
                //  Skip backward 10 seconds
                document.getElementById("rew").addEventListener("click", function () {
                    setTime(-10);
                }, false);
                //  Skip forward 10 seconds
                document.getElementById("fwd").addEventListener("click", function () {
                    setTime(10);
                }, false);
                //  set src == latest video file URL
                document.getElementById("loadVideo").addEventListener("click", getVideo, false);

                // fail with message 
                video.addEventListener("error", function (err) {
                    errMessage(err);
                }, true);
                // volume buttons
                document.getElementById("volDn").addEventListener("click", function () {
                    setVol(-.1); // down by 10%
                }, false);
                document.getElementById("volUp").addEventListener("click", function () {
                    setVol(.1);  // up by 10%
                }, false);

                // playback speed buttons
                document.getElementById("slower").addEventListener("click", function () {
                    video.playbackRate -= .25;
                }, false);
                document.getElementById("faster").addEventListener("click", function () {
                    video.playbackRate += .25;
                }, false);
                document.getElementById("normal").addEventListener("click", function () {
                    video.playbackRate = 1;
                }, false);
                document.getElementById("mute").addEventListener("click", function (evt) {
                    if (video.muted) {
                        video.muted = false;
                        evt.target.innerHTML = "<img alt='volume on button' src='vol2.png' />"
                    } else {
                        video.muted = true;
                        evt.target.innerHTML = "<img alt='volume off button' src='mute2.png' />"
                    }
                }, false);
            } // end of runtime
        }// end of master         
    </script>
    
    </head>
    <body onload="init();" >        
</P>
<video id="Video1" controls style="border: 1px solid blue;" width=100% title="video element">您的瀏覽器不支援HTML5</video>
    
    <p id="buttonbar" style="display: none;")>
<label>播放:</label>
        <button id="restart" title="Restart button">重播</button> 

        <button id="rew" title="Rewind button" >後退</button>
        <button id="play" title="Play button">播放</button>

        <button id="faster" title="Faster playback button">前進</button>   
        <br />
<label>速率:</label>
        <button id="slower" title="Slower playback button">慢放</button>
        <button id="fwd" title="Forward button" >快放</button>
        <button id="normal" title="Reset playback rate button">重置</button>
        <br />
<label>音量:</label>
            <button id="volDn"  title="Volume down button">減音</button>
            <button id="volUp"  title="Volume up button">增音</button>
    </p>   
    <br/>  
    <p id= "inputField" style="display:none;" >
        <label>輸入影音的URL: <br/>
        <input type="text" id="videoFile" style="width: 300px;"  title="video file input field" value="http://oa.zhuhe.tw:9000/video/d/YongYuan'JiYi.mp4" />        
        <button id="loadVideo" title="Load video button" >播放</button>
        </label>
    </p>
    <p title="Error message area" id="errorMsg" style="color:Red;"></p>
<h3><span aria-hidden="true"></span>朱賀的聯絡方式</h3>
<p>電子郵箱：zhuhe@zhuhe.tw</p>
<footer class="site-footer">
<span class="site-footer-owner"><a href="/">ChuHo</a> is maintained by <a href="/zhuhe">zhuhe</a>.</span>
Republic Of China 105</a>.</span>
</footer>
    </section>
  </body>
</html>
